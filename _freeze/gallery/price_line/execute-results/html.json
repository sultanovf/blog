{
  "hash": "d94cedfdcc0161713b5b91e10b253f83",
  "result": {
    "markdown": "---\ntitle: \"animated lineplot\"\ndescription: \"#part_1: an *animated lineplot* for the price development of of meat products in Uzbekistan over year and months using `ggplot2` and `gganimate`\"\nauthor: \"Fazliddin Sultonov\"\ndate: \"2025-02-08\"\ndate-format: \"MMM D, YYYY\"\n\nfilters:\n  - lightbox\nlightbox: \n  match: auto\n  effect: none\n  desc-position: top\n\npage-layout: full\nreference-location: margin\ncategories: [lineplot, R, ggplot2, gganimate, geom_image]\n# Code execute options\nexecute: \n  echo: true    # Input anzeigen\n  eval: true    # Code ausführen\n  freeze: true  # never re-render during project render\n# Output\nformat: \n  html:\n    theme: cosmo\n  # codeb block\n    code-fold: true\n    code-line-numbers: true\n    code-block-border-left: true\n  # engine\n    engine: knitr\n    css: /customs/style.css\n# engine: knitr\n#jupyter: python3\n\n# Chunk Options\nknitr:\n  opts_chunk:\n    comment: \"#>\" \n\n  opts_knit: \n    warning: false\n    error: false\n    \n---\n\n\n\n![](gallery_img/line_meat.png)\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n\n\n:::: {.column-screen}\n::: {.code-r}\n# `<svg preserveAspectRatio=\"none\" aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:2.0em;width:2.0em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:steelblue;overflow:visible;position:relative;\"><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html}{.center-slide}\n\n:::\n::::\n\n\nDatasource: [Statistics Agency under the President of the Republic of Uzbekistan](https://stat.uz/en/) |\nDatastorage: [{{< fa brands square-github >}}GitHub](https://github.com/sultanovf/my_datasets/blob/main/priceuz_202101-202411.csv)\n\n\n## data\n\n\n::: {.cell .column-screen-inset}\n\n```{.r .cell-code}\ndata_raw <- read.csv2(\n  \"https://raw.githubusercontent.com/sultanovf/my_datasets/refs/heads/main/priceuz_202101-202411.csv\")\n\n  \nprice_uz <-\n  data_raw |> \n  select(-runame) |> \n  add_column(runame, .after = \"enname\" )\n\ndatseq <- as.character(seq(as.Date(\"2021-01-01\"),as.Date(\"2024-11-01\"), by = \"month\"))\nnew_colnames <- c(\"uzname\", \"enname\", \"runame\", unlist(strsplit(datseq, \",\")))\ncolnames(price_uz) <- new_colnames\n\n\nrmarkdown::paged_table(sample_n(price_uz, 10)) # show sample 10 rows\n# oder {r, df_print = \"paged\"}\n# sample_n(data_raw, 10\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"uzname\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"enname\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"runame\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"2021-01-01\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2021-02-01\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2021-03-01\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2021-04-01\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2021-05-01\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2021-06-01\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2021-07-01\"],\"name\":[10],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2021-08-01\"],\"name\":[11],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2021-09-01\"],\"name\":[12],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2021-10-01\"],\"name\":[13],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2021-11-01\"],\"name\":[14],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2021-12-01\"],\"name\":[15],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2022-01-01\"],\"name\":[16],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2022-02-01\"],\"name\":[17],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2022-03-01\"],\"name\":[18],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2022-04-01\"],\"name\":[19],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2022-05-01\"],\"name\":[20],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2022-06-01\"],\"name\":[21],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2022-07-01\"],\"name\":[22],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2022-08-01\"],\"name\":[23],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2022-09-01\"],\"name\":[24],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2022-10-01\"],\"name\":[25],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2022-11-01\"],\"name\":[26],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2022-12-01\"],\"name\":[27],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2023-01-01\"],\"name\":[28],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2023-02-01\"],\"name\":[29],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2023-03-01\"],\"name\":[30],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2023-04-01\"],\"name\":[31],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2023-05-01\"],\"name\":[32],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2023-06-01\"],\"name\":[33],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2023-07-01\"],\"name\":[34],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2023-08-01\"],\"name\":[35],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2023-09-01\"],\"name\":[36],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2023-10-01\"],\"name\":[37],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2023-11-01\"],\"name\":[38],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2023-12-01\"],\"name\":[39],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2024-01-01\"],\"name\":[40],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2024-02-01\"],\"name\":[41],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2024-03-01\"],\"name\":[42],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2024-04-01\"],\"name\":[43],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2024-05-01\"],\"name\":[44],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2024-06-01\"],\"name\":[45],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2024-07-01\"],\"name\":[46],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2024-08-01\"],\"name\":[47],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2024-09-01\"],\"name\":[48],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2024-10-01\"],\"name\":[49],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2024-11-01\"],\"name\":[50],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Mosh\",\"2\":\"Mash\",\"3\":\"Маш\",\"4\":\"11768.1\",\"5\":\"11904.6\",\"6\":\"11982.4\",\"7\":\"12090.4\",\"8\":\"12167.7\",\"9\":\"12208.4\",\"10\":\"12344.8\",\"11\":\"12889.5\",\"12\":\"13256.1\",\"13\":\"13102.2\",\"14\":\"12969.3\",\"15\":\"12920.0\",\"16\":\"12903.8\",\"17\":\"12919.6\",\"18\":\"12877.3\",\"19\":\"12764.0\",\"20\":\"12868.0\",\"21\":\"13069.5\",\"22\":\"13241.4\",\"23\":\"13353.0\",\"24\":\"13556.3\",\"25\":\"13620.0\",\"26\":\"13591.5\",\"27\":\"13625.3\",\"28\":\"13851.9\",\"29\":\"13971.1\",\"30\":\"14094.8\",\"31\":\"14087.8\",\"32\":\"14026.2\",\"33\":\"13990.4\",\"34\":\"13935.7\",\"35\":\"13990.3\",\"36\":\"14093.0\",\"37\":\"14064.0\",\"38\":\"14025.3\",\"39\":\"14007.2\",\"40\":\"14014.7\",\"41\":\"14132.2\",\"42\":\"14237.3\",\"43\":\"14406.5\",\"44\":\"14691.9\",\"45\":\"15013.4\",\"46\":\"15584.4\",\"47\":\"16168.9\",\"48\":\"17354.9\",\"49\":\"17515.3\",\"50\":\"17034.5\"},{\"1\":\"Karam\",\"2\":\"Cabbage\",\"3\":\"Капуста\",\"4\":\"2075.0\",\"5\":\"2154.2\",\"6\":\"2168.0\",\"7\":\"2462.3\",\"8\":\"2063.8\",\"9\":\"1575.4\",\"10\":\"1724.9\",\"11\":\"1946.8\",\"12\":\"2324.2\",\"13\":\"2829.4\",\"14\":\"3326.1\",\"15\":\"3817.9\",\"16\":\"4581.5\",\"17\":\"4902.7\",\"18\":\"5046.7\",\"19\":\"5169.6\",\"20\":\"4236.5\",\"21\":\"3622.8\",\"22\":\"3147.6\",\"23\":\"2977.6\",\"24\":\"2837.1\",\"25\":\"2784.7\",\"26\":\"2805.3\",\"27\":\"2909.2\",\"28\":\"3245.5\",\"29\":\"3859.7\",\"30\":\"3820.4\",\"31\":\"4398.7\",\"32\":\"4579.2\",\"33\":\"3245.4\",\"34\":\"3379.3\",\"35\":\"5159.6\",\"36\":\"5676.7\",\"37\":\"4343.0\",\"38\":\"3449.2\",\"39\":\"3100.0\",\"40\":\"3111.8\",\"41\":\"2900.6\",\"42\":\"2983.4\",\"43\":\"3145.5\",\"44\":\"2713.2\",\"45\":\"2205.5\",\"46\":\"2313.8\",\"47\":\"2522.6\",\"48\":\"2627.4\",\"49\":\"2765.4\",\"50\":\"2924.3\"},{\"1\":\"Shakar\",\"2\":\"Sugar\",\"3\":\"Сахар\",\"4\":\"7359.7\",\"5\":\"7449.2\",\"6\":\"7597.3\",\"7\":\"7975.6\",\"8\":\"8372.4\",\"9\":\"8474.7\",\"10\":\"8498.1\",\"11\":\"8510.8\",\"12\":\"8506.5\",\"13\":\"8534.4\",\"14\":\"8893.0\",\"15\":\"9031.2\",\"16\":\"9084.0\",\"17\":\"9097.4\",\"18\":\"9735.2\",\"19\":\"10169.5\",\"20\":\"10635.1\",\"21\":\"12644.3\",\"22\":\"13834.1\",\"23\":\"13779.9\",\"24\":\"13695.3\",\"25\":\"13777.9\",\"26\":\"13456.6\",\"27\":\"12960.7\",\"28\":\"12855.9\",\"29\":\"12930.7\",\"30\":\"13420.2\",\"31\":\"14361.3\",\"32\":\"14823.1\",\"33\":\"14560.5\",\"34\":\"14012.3\",\"35\":\"13961.7\",\"36\":\"13922.4\",\"37\":\"13908.0\",\"38\":\"14111.1\",\"39\":\"14181.3\",\"40\":\"14141.5\",\"41\":\"13957.9\",\"42\":\"14006.2\",\"43\":\"14362.1\",\"44\":\"14595.4\",\"45\":\"14490.0\",\"46\":\"14480.1\",\"47\":\"14461.7\",\"48\":\"14389.8\",\"49\":\"14261.1\",\"50\":\"14072.9\"},{\"1\":\"Kombikorm\",\"2\":\"Compound feed\",\"3\":\"Комбикорм\",\"4\":\"2276.2\",\"5\":\"2327.7\",\"6\":\"2416.7\",\"7\":\"2510.6\",\"8\":\"2651.2\",\"9\":\"2691.1\",\"10\":\"2727.9\",\"11\":\"2763.4\",\"12\":\"2771.0\",\"13\":\"2776.9\",\"14\":\"2853.8\",\"15\":\"2880.5\",\"16\":\"2840.6\",\"17\":\"2921.5\",\"18\":\"3051.6\",\"19\":\"3134.8\",\"20\":\"3237.4\",\"21\":\"3344.3\",\"22\":\"3455.4\",\"23\":\"3450.4\",\"24\":\"3543.0\",\"25\":\"3604.4\",\"26\":\"3667.1\",\"27\":\"3728.8\",\"28\":\"3725.2\",\"29\":\"3782.4\",\"30\":\"3753.9\",\"31\":\"3738.0\",\"32\":\"3721.9\",\"33\":\"3814.8\",\"34\":\"3811.1\",\"35\":\"3824.3\",\"36\":\"3824.3\",\"37\":\"3819.5\",\"38\":\"3808.7\",\"39\":\"3812.9\",\"40\":\"3767.3\",\"41\":\"3715.2\",\"42\":\"3695.1\",\"43\":\"3709.8\",\"44\":\"3715.1\",\"45\":\"3711.9\",\"46\":\"3704.2\",\"47\":\"3702.9\",\"48\":\"3724.1\",\"49\":\"3741.4\",\"50\":\"3736.8\"},{\"1\":\"Sabzi\",\"2\":\"Carrot\",\"3\":\"Морковь\",\"4\":\"2073.2\",\"5\":\"2039.7\",\"6\":\"2181.3\",\"7\":\"2895.9\",\"8\":\"3691.2\",\"9\":\"6920.6\",\"10\":\"7009.0\",\"11\":\"6130.3\",\"12\":\"5166.4\",\"13\":\"3950.2\",\"14\":\"2627.3\",\"15\":\"2261.7\",\"16\":\"2323.2\",\"17\":\"2458.0\",\"18\":\"2640.0\",\"19\":\"3092.9\",\"20\":\"3315.3\",\"21\":\"3215.6\",\"22\":\"2986.1\",\"23\":\"2858.8\",\"24\":\"2827.8\",\"25\":\"3000.0\",\"26\":\"3174.2\",\"27\":\"3128.5\",\"28\":\"3375.7\",\"29\":\"3702.6\",\"30\":\"3535.0\",\"31\":\"3831.6\",\"32\":\"4063.2\",\"33\":\"3958.5\",\"34\":\"4240.9\",\"35\":\"4772.4\",\"36\":\"5124.0\",\"37\":\"4311.8\",\"38\":\"3292.8\",\"39\":\"2927.5\",\"40\":\"2904.1\",\"41\":\"2735.1\",\"42\":\"2743.2\",\"43\":\"2759.4\",\"44\":\"2814.4\",\"45\":\"2877.1\",\"46\":\"2911.3\",\"47\":\"3188.8\",\"48\":\"3609.3\",\"49\":\"3688.5\",\"50\":\"3523.5\"},{\"1\":\"Pomidor\",\"2\":\"Tomatoes\",\"3\":\"Помидоры\",\"4\":\"10820.4\",\"5\":\"11566.5\",\"6\":\"15408.0\",\"7\":\"14976.5\",\"8\":\"10031.5\",\"9\":\"5552.6\",\"10\":\"3512.2\",\"11\":\"3570.6\",\"12\":\"4341.3\",\"13\":\"6072.4\",\"14\":\"9789.3\",\"15\":\"11900.5\",\"16\":\"14423.5\",\"17\":\"14911.4\",\"18\":\"16704.8\",\"19\":\"17195.6\",\"20\":\"13193.9\",\"21\":\"7828.1\",\"22\":\"4045.6\",\"23\":\"4758.4\",\"24\":\"6623.9\",\"25\":\"7914.6\",\"26\":\"11334.7\",\"27\":\"14388.1\",\"28\":\"18572.2\",\"29\":\"20089.6\",\"30\":\"25936.9\",\"31\":\"32207.3\",\"32\":\"15259.7\",\"33\":\"6232.9\",\"34\":\"4749.4\",\"35\":\"4252.4\",\"36\":\"4432.7\",\"37\":\"6749.4\",\"38\":\"14503.5\",\"39\":\"24277.8\",\"40\":\"28910.4\",\"41\":\"28221.6\",\"42\":\"28034.9\",\"43\":\"28369.5\",\"44\":\"20000.4\",\"45\":\"10263.5\",\"46\":\"5018.4\",\"47\":\"4824.8\",\"48\":\"6356.0\",\"49\":\"8484.2\",\"50\":\"16168.7\"},{\"1\":\"Mol goshti\",\"2\":\"Beef\",\"3\":\"Говядина\",\"4\":\"59081.6\",\"5\":\"59243.1\",\"6\":\"59595.4\",\"7\":\"60337.9\",\"8\":\"61162.9\",\"9\":\"61627.9\",\"10\":\"63009.2\",\"11\":\"64839.9\",\"12\":\"65783.8\",\"13\":\"65664.7\",\"14\":\"65362.2\",\"15\":\"64640.4\",\"16\":\"64721.1\",\"17\":\"64719.6\",\"18\":\"64616.2\",\"19\":\"64237.2\",\"20\":\"64433.3\",\"21\":\"64920.9\",\"22\":\"65782.9\",\"23\":\"66560.3\",\"24\":\"67541.6\",\"25\":\"69126.5\",\"26\":\"69821.3\",\"27\":\"69973.8\",\"28\":\"71679.4\",\"29\":\"72446.3\",\"30\":\"72870.6\",\"31\":\"73420.2\",\"32\":\"74465.9\",\"33\":\"75420.9\",\"34\":\"75513.0\",\"35\":\"76313.5\",\"36\":\"77265.9\",\"37\":\"77495.2\",\"38\":\"77920.8\",\"39\":\"77957.3\",\"40\":\"78060.7\",\"41\":\"77604.1\",\"42\":\"77083.8\",\"43\":\"77179.2\",\"44\":\"77622.1\",\"45\":\"78047.5\",\"46\":\"79085.6\",\"47\":\"83267.1\",\"48\":\"86647.5\",\"49\":\"88328.8\",\"50\":\"88885.0\"},{\"1\":\"Guruch\",\"2\":\"Rice\",\"3\":\"Рис\",\"4\":\"10092.2\",\"5\":\"10125.6\",\"6\":\"10123.8\",\"7\":\"10159.4\",\"8\":\"10155.8\",\"9\":\"10122.9\",\"10\":\"10109.5\",\"11\":\"10124.0\",\"12\":\"10050.4\",\"13\":\"9935.1\",\"14\":\"9912.3\",\"15\":\"9742.3\",\"16\":\"9758.3\",\"17\":\"9787.8\",\"18\":\"9788.0\",\"19\":\"9559.5\",\"20\":\"9675.7\",\"21\":\"10027.2\",\"22\":\"10161.0\",\"23\":\"10694.1\",\"24\":\"11192.8\",\"25\":\"11706.4\",\"26\":\"12035.5\",\"27\":\"12447.3\",\"28\":\"14854.7\",\"29\":\"16217.9\",\"30\":\"17342.1\",\"31\":\"18116.5\",\"32\":\"18890.2\",\"33\":\"19501.3\",\"34\":\"19793.9\",\"35\":\"20152.3\",\"36\":\"20436.3\",\"37\":\"20380.8\",\"38\":\"20292.9\",\"39\":\"20280.5\",\"40\":\"20255.0\",\"41\":\"20034.1\",\"42\":\"19910.9\",\"43\":\"20044.7\",\"44\":\"20250.1\",\"45\":\"20318.0\",\"46\":\"20445.5\",\"47\":\"20524.1\",\"48\":\"20876.7\",\"49\":\"20467.8\",\"50\":\"19837.8\"},{\"1\":\"Noxot\",\"2\":\"Peas\",\"3\":\"Горох\",\"4\":\"12035.5\",\"5\":\"13040.7\",\"6\":\"13842.3\",\"7\":\"14446.4\",\"8\":\"14971.4\",\"9\":\"15149.3\",\"10\":\"15182.7\",\"11\":\"15416.6\",\"12\":\"15579.4\",\"13\":\"15636.5\",\"14\":\"16075.9\",\"15\":\"16269.6\",\"16\":\"16908.9\",\"17\":\"17255.7\",\"18\":\"17414.6\",\"19\":\"17553.6\",\"20\":\"17899.3\",\"21\":\"18110.1\",\"22\":\"18114.3\",\"23\":\"18320.4\",\"24\":\"18502.2\",\"25\":\"18884.1\",\"26\":\"19371.5\",\"27\":\"19734.1\",\"28\":\"20318.8\",\"29\":\"20874.4\",\"30\":\"21473.9\",\"31\":\"21950.8\",\"32\":\"22058.5\",\"33\":\"21978.2\",\"34\":\"21940.7\",\"35\":\"21942.3\",\"36\":\"21943.9\",\"37\":\"21933.4\",\"38\":\"21948.9\",\"39\":\"22085.9\",\"40\":\"22501.5\",\"41\":\"22667.3\",\"42\":\"22668.6\",\"43\":\"22723.1\",\"44\":\"22805.2\",\"45\":\"22815.4\",\"46\":\"22827.8\",\"47\":\"22786.2\",\"48\":\"22077.6\",\"49\":\"21840.3\",\"50\":\"21731.1\"},{\"1\":\"Kepak\",\"2\":\"Bran\",\"3\":\"Отруби\",\"4\":\"2114.0\",\"5\":\"2114.7\",\"6\":\"2168.9\",\"7\":\"2352.6\",\"8\":\"2489.2\",\"9\":\"2499.7\",\"10\":\"2510.1\",\"11\":\"2533.0\",\"12\":\"2546.4\",\"13\":\"2566.9\",\"14\":\"2626.4\",\"15\":\"2682.0\",\"16\":\"2676.7\",\"17\":\"2743.7\",\"18\":\"2777.4\",\"19\":\"2817.5\",\"20\":\"2858.5\",\"21\":\"2934.6\",\"22\":\"2952.3\",\"23\":\"3072.7\",\"24\":\"3087.5\",\"25\":\"3148.6\",\"26\":\"3165.7\",\"27\":\"3183.7\",\"28\":\"3109.8\",\"29\":\"3142.7\",\"30\":\"3146.7\",\"31\":\"3146.7\",\"32\":\"3175.8\",\"33\":\"3282.3\",\"34\":\"3246.4\",\"35\":\"3228.5\",\"36\":\"3219.0\",\"37\":\"3190.2\",\"38\":\"3154.3\",\"39\":\"3120.2\",\"40\":\"3090.5\",\"41\":\"3033.5\",\"42\":\"3009.8\",\"43\":\"2999.6\",\"44\":\"3031.2\",\"45\":\"3011.8\",\"46\":\"2973.7\",\"47\":\"2945.4\",\"48\":\"2941.1\",\"49\":\"2914.9\",\"50\":\"2873.6\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n## dataclean\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add column catecory\ndf_data <- price_uz |> \n  select(-enname) |> \n  filter(uzname %in% filtermap) |> \n  mutate(\n    category = case_when(\n      uzname %in% gosht ~ \"Мясо\",\n      uzname %in% sabzavot ~ \"Овощи\",\n      uzname %in% oziqovqat ~ \"Питание\",\n      uzname %in% yog ~ \"Mасло\",\n      TRUE ~ \"Другой\"\n    )\n  )\n\n# pivot data\ndf_piv <-\n  df_data |> \n  pivot_longer(\n    cols = !c(uzname, runame, category),\n    names_to = \"date\",\n    values_to = \"price\"\n  ) |> \n  mutate(\n    date = as.Date(date)\n  )\n\ndf_piv |> \n  sample_n(7)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> # A tibble: 7 × 5\n#>   uzname       runame           category date        price\n#>   <chr>        <chr>            <chr>    <date>      <dbl>\n#> 1 Tovuq goshti Курица           Мясо     2024-11-01 31441.\n#> 2 Tovuq goshti Курица           Мясо     2021-05-01 23033.\n#> 3 Guruch       Рис              Питание  2022-04-01  9560.\n#> 4 Yog(paxta)   Масло(хлопковое) Mасло    2023-10-01 16024.\n#> 5 Sarimsoq     Чеснок           Овощи    2022-08-01 16018.\n#> 6 Kartoshka    Картофель        Овощи    2024-07-01  4228 \n#> 7 Shakar       Сахар            Питание  2021-09-01  8506.\n```\n:::\n:::\n\n\n\n## prepare data for plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf1 <- \n  df_piv |>\n  filter(\n    runame %in% c(\"Баранина\", \"Говядина\", \"Масло сливочное\", \"Курица\")\n  ) |> \n  mutate(\n    images = case_when(\n      runame == \"Баранина\" ~ paste0(img_path,uzname,\".png\"),\n      runame == \"Говядина\" ~ paste0(img_path,uzname,\".png\"),\n      runame == \"Масло сливочное\" ~ paste0(img_path,uzname,\".png\"),\n      runame == \"Курица\" ~ paste0(img_path,uzname,\".png\"),\n      TRUE ~ uzname\n      \n    ),\n    frame = row_number()\n  )\n\nhead(df1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> # A tibble: 6 × 7\n#>   uzname     runame   category date        price images                    frame\n#>   <chr>      <chr>    <chr>    <date>      <dbl> <chr>                     <int>\n#> 1 Mol goshti Говядина Мясо     2021-01-01 59082. gallery_img/products/Mol…     1\n#> 2 Mol goshti Говядина Мясо     2021-02-01 59243. gallery_img/products/Mol…     2\n#> 3 Mol goshti Говядина Мясо     2021-03-01 59595. gallery_img/products/Mol…     3\n#> 4 Mol goshti Говядина Мясо     2021-04-01 60338. gallery_img/products/Mol…     4\n#> 5 Mol goshti Говядина Мясо     2021-05-01 61163. gallery_img/products/Mol…     5\n#> 6 Mol goshti Говядина Мясо     2021-06-01 61628. gallery_img/products/Mol…     6\n```\n:::\n:::\n\n\n\n## plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Title/subtitle/legendtitle\nt <- paste(\"Динамика цен на мясо\")\nst <- paste(\"Январь 2021 - Ноябрь 2024\")\np <- paste(\"продукты\")\npp <- \n  df1 |> \n  ggplot(aes(x = date, y = price, color = runame)) +\n  geom_line()+\n  geom_point()+\n  scale_y_continuous(limits = c(20000,95000),breaks = seq(20000, 95000, 5000),\n                     labels = function(x) paste(x/1000)) +\n  scale_x_date(date_labels = \"%Y\") +\n  #guides(fill = guide_legend(title = \"Produkt\"))+ #change legen title not worked\n  labs(\n    #fill = p,     #change legen title not worked\n    title = t, \n    subtitle = st,\n    caption = cap,\n    y = \"Цена в тысячах сумов\",\n    x = NULL)+\n  \n  theme_minimal()+\n  theme(\n    plot.title = element_text(size = 12, color = \"steelblue4\", face = \"bold\", hjust = 0.5),\n    plot.subtitle = element_text(size=11, color = \"tomato3\", face = \"bold\", hjust = 0.5),\n    plot.caption = ggtext::element_markdown(size = 11, hjust = 0.5),\n    legend.position = \"bottom\",\n    legend.box.background =element_rect(\"floralwhite\"))\n\nmol <- \"gallery_img/products/Mol goshti1.png\"\n\npp$labels$colour = \"продукты\" #change legen title\n\np1 <- ggbackground(pp, mol, alpha = .5, color = \"gray\")\n\np1\n```\n\n::: {.cell-output-display}\n![](price_line_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n## plot animated\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# icon ----------------------------------------\nf_path <- \"C:/Users/sultanov/Documents/fontawesome/otfs/\"\nfont_add('Font Awesome 6 Brands', paste0(f_path, \"Font Awesome 6 Brands-Regular-400.otf\"))  # social\n\nshowtext::showtext_auto()\n\np2 <- \n  df1 |> \n  ggplot(aes(x = date, y = price, fill = runame)) +\n  geom_line()+\n  geom_point()+\n  geom_image(aes(image=images),  size=0.12)+\n  geom_label(aes(label = as.character(price)), size = 3.5 ,hjust = 1.2, colour= \"white\")+\n  # scales\n  scale_y_continuous(limits = c(20000,95000),breaks = seq(20000, 95000, 5000),\n                     labels = function(x) paste(x/1000)) +\n  scale_x_date(date_labels = \"%Y\") +\n  # Labs/titles\n  labs(\n    title = t, \n    subtitle = \"{format(frame_along, '%Y - %B')}\",\n    caption = cap,\n    y = \"Цена в тысячах сумов\",\n    x = NULL,\n    fill = p)+   # funktioniert wenn aes oben fill, wenn color nicht\n  # Theme format\n  theme_minimal()+\n  theme(\n    plot.title = element_text(size = 14, color = \"steelblue4\", face = \"bold\", hjust = 0.5),\n    plot.subtitle = element_text(size=12, color = \"tomato3\", face = \"bold\", hjust = 0.5),\n    plot.caption = ggtext::element_markdown(size = 12, hjust = 0.5),\n    #legend.title = element_markdown(p), #change legen title not worked\n    legend.position = \"bottom\",   #c(0.90, 0.13)\n    \n    legend.box.background =element_rect(\"floralwhite\"))+\n  # animate\n  # transition_time(date) # keine Linie\n  transition_reveal(date)\np2\n\n## render and Save\n# anim_p <- \n#   p2 |>\n#   animate(\n#     duration = 20,\n#     fps = 10,\n#     start_pause = 5,\n#     end_pause = 10,\n#     height = 533,\n#     width = 833,\n#     renderer = av_renderer()\n#   )\n# \n# anim_p\n\n#anim_save(\"C:/Users/sultanov/YandexDisk/f-sultan/temp/r/gganimate/plots/price_5.mp4\", price_5 = a1)\n```\n\n::: {.cell-output-display}\n![](price_line_files/figure-html/unnamed-chunk-7-1.gif)\n:::\n:::\n\n\n\n## Saved as Video\n\n\n![](plots/price_line.mp4)\n\n\n\n\n\n",
    "supporting": [
      "price_line_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}